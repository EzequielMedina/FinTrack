<div class="dashboard-container">
  <div class="dashboard-header">
    @if (currentUser(); as user) {
      <h1>¡Bienvenido, {{ user.firstName }}!</h1>
    } @else {
      <h1>¡Bienvenido a FinTrack!</h1>
    }
  </div>

  <div class="dashboard-content">
    <mat-grid-list cols="2" rowHeight="200px" gutterSize="16px" class="dashboard-grid">
      <!-- Resumen de Cuentas -->
      <mat-grid-tile>
        <mat-card class="dashboard-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="card-icon accounts">account_balance</mat-icon>
            <mat-card-title>Mis Cuentas</mat-card-title>
            <mat-card-subtitle>Gestiona tus cuentas bancarias</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="card-stats">
              <span class="stat-number">0</span>
              <span class="stat-label">Cuentas activas</span>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">Ver Cuentas</button>
          </mat-card-actions>
        </mat-card>
      </mat-grid-tile>

      <!-- Transacciones Recientes -->
      <mat-grid-tile>
        <mat-card class="dashboard-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="card-icon transactions">swap_horiz</mat-icon>
            <mat-card-title>Transacciones</mat-card-title>
            <mat-card-subtitle>Historial de movimientos</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="card-stats">
              <span class="stat-number">0</span>
              <span class="stat-label">Este mes</span>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">Ver Transacciones</button>
          </mat-card-actions>
        </mat-card>
      </mat-grid-tile>

      <!-- Billetera Digital -->
      <mat-grid-tile>
        <mat-card class="dashboard-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="card-icon wallet">account_balance_wallet</mat-icon>
            <mat-card-title>Billetera Digital</mat-card-title>
            <mat-card-subtitle>Saldo disponible</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="card-stats">
              <span class="stat-number">$0.00</span>
              <span class="stat-label">ARS</span>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">Gestionar</button>
          </mat-card-actions>
        </mat-card>
      </mat-grid-tile>

      <!-- Reportes -->
      <mat-grid-tile>
        <mat-card class="dashboard-card">
          <mat-card-header>
            <mat-icon mat-card-avatar class="card-icon reports">assessment</mat-icon>
            <mat-card-title>Reportes</mat-card-title>
            <mat-card-subtitle>Análisis financiero</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="card-stats">
              <span class="stat-number">0</span>
              <span class="stat-label">Reportes generados</span>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">Ver Reportes</button>
          </mat-card-actions>
        </mat-card>
      </mat-grid-tile>
    </mat-grid-list>

    <!-- Quick Actions -->
    <section class="quick-actions">
      <h3>Acciones Rápidas</h3>
      <div class="actions-grid">
        <!-- Acciones para todos los usuarios -->
        <button mat-fab extended color="primary" class="action-button">
          <mat-icon>add</mat-icon>
          Nueva Transacción
        </button>
        <button mat-fab extended color="accent" class="action-button">
          <mat-icon>credit_card</mat-icon>
          Agregar Tarjeta
        </button>
        <button mat-fab extended class="action-button">
          <mat-icon>file_download</mat-icon>
          Exportar Datos
        </button>
        
        <!-- Acciones exclusivas para administradores -->
        <button mat-fab extended color="warn" class="action-button" 
                [routerLink]="['/admin']"
                *appHasPermission="Permission.ADMIN_PANEL_ACCESS">
          <mat-icon>admin_panel_settings</mat-icon>
          Panel de Administración
        </button>
        
        <button mat-fab extended color="warn" class="action-button"
                [routerLink]="['/admin/users']"
                *appHasPermission="Permission.USER_READ">
          <mat-icon>people</mat-icon>
          Gestionar Usuarios
        </button>
      </div>
    </section>
    
    <!-- Sección especial para Administradores -->
    <section class="admin-section" *appHasRole="UserRole.ADMIN">
      <h3>Funciones de Administrador</h3>
      <mat-grid-list cols="3" rowHeight="150px" gutterSize="16px" class="admin-grid">
        <mat-grid-tile>
          <mat-card class="admin-card" [routerLink]="['/admin/users']">
            <mat-card-header>
              <mat-icon mat-card-avatar class="admin-icon">people</mat-icon>
              <mat-card-title>Usuarios</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <p>Crear, editar y gestionar usuarios del sistema</p>
            </mat-card-content>
          </mat-card>
        </mat-grid-tile>
        
        <mat-grid-tile>
          <mat-card class="admin-card" [routerLink]="['/admin']">
            <mat-icon mat-card-avatar class="admin-icon">dashboard</mat-icon>
            <mat-card-title>Panel Admin</mat-card-title>
            <mat-card-content>
              <p>Dashboard completo de administración</p>
            </mat-card-content>
          </mat-card>
        </mat-grid-tile>
        
        <mat-grid-tile>
          <mat-card class="admin-card" *appHasPermission="Permission.REPORTS_VIEW">
            <mat-icon mat-card-avatar class="admin-icon">analytics</mat-icon>
            <mat-card-title>Reportes Avanzados</mat-card-title>
            <mat-card-content>
              <p>Análisis y reportes del sistema</p>
            </mat-card-content>
          </mat-card>
        </mat-grid-tile>
      </mat-grid-list>
    </section>
  </div>
</div>
